---
title: JS / TS로 풀어보기 - 다트 게
date: '2020-08-13 00:08:30'
description: ''
tags: ['#Dev', '#TypeScript', '#CodingTest', '#JavaScript']
image: ./algorithm.png
---

> 평어체를 사용합니다.

![https://icons8.com/icon/80351/brainstorm-skill | https://icons8.com/icon/108784/javascript | https://icons8.com/icon/uJM6fQYqDaZK/typescript](algorithm.png)

# 코딩테스트 연습하기

학교 취업맞춤반 수업을 듣는데 수업을 해주시는 선생님께서 몇가지 알고리즘 문제를 풀어보라고 하셨다. 원래 취업맞춤반 시간에 알고리즘을 풀곤 해서 열심히 풀었다. 그 중에서 이 문제가 좀 기억에 남는다.

## 문제

### 문제 설명

#### 다트 게임

1. 다트 게임은 총 3번의 기회로 구성된다.
2. 각 기회마다 얻을 수 있는 점수는 0점에서 10점까지이다.
3. 점수와 함께 Single(S), Double(D), Triple(T) 영역이 존재하고 각 영역 당첨 시 점수에서 1제곱, 2제곱, 3제곱 (점수1 , 점수2 , 점수3 )으로 계산된다. -옵션으로 스타상(`*`) , 아차상(`#`)이 존재하며 스타상(`*`) 당첨 시 해당 점수와 바로 전에 얻은 점수를 각 2배로 만든다. 아차상(#) 당첨 시 해당 점수는 마이너스된다.
4. 스타상(`*`)은 첫 번째 기회에서도 나올 수 있다. 이 경우 첫 번째 스타상(`*`)의 점수만 2배가 된다. (예제 4번 참고)
5. 스타상(`*`)의 효과는 다른 스타상(`*`)의 효과와 중첩될 수 있다. 이 경우 중첩된 스타상(`*`) 점수는 4배가 된다. (예제 4번 참고)
6. 스타상(`*`)의 효과는 아차상(#)의 효과와 중첩될 수 있다. 이 경우 중첩된 아차상(#)의 점수는 -2배가 된다. (예제 5번 참고)
7. Single(S), Double(D), Triple(T)은 점수마다 하나씩 존재한다. -스타상(`*`), 아차상(#)은 점수마다 둘 중 하나만 존재할 수 있으며, 존재하지 않을 수도 있다.

0~10의 정수와 문자 S, D, T, \*, #로 구성된 문자열이 입력될 시 총점수를 반환하는 함수를 작성하라.

### 입력 형식

`점수|보너스|[옵션]` 으로 이루어진 문자열 3세트.
예) 1S2D\*3T

- 점수는 0에서 10 사이의 정수이다.
- 보너스는 S, D, T 중 하나이다.
- 옵선은 \*이나 # 중 하나이며, 없을 수도 있다.

### 출력 형식

3번의 기회에서 얻은 점수 합계에 해당하는 정수값을 출력한다.

예) 37

### 입출력 예제

| 예제 | dartResult | answer | 설명                         |
| ---- | ---------- | ------ | ---------------------------- |
| 1    | 1S2D\*3T   | 37     | 1^1 \* 2 + 2^2 \ 2 + 3^3     |
| 2    | 1D2S#10S   | 9      | 12 + 21 \_ (-1) + 101        |
| 3    | 1D2S0T     | 3      | 12 + 21 + 03                 |
| 4    | 1S\*2T\*3S | 23     | 11 _ 2 _ 2 + 23 \* 2 + 31    |
| 5    | 1D#2S\*3S  | 5      | 12 _ (-1) _ 2 + 21 \_ 2 + 31 |
| 6    | 1T2D3D#    | -4     | 13 + 22 + 32 \_ (-1)         |
| 7    | 1D2S3T\*   | 59     | 12 + 21 \* 2 + 33 \* 2       |

## 풀이

```typescript
const solution = (dartResult: string) => {
  const numArr = dartResult.split(/\D/).filter(Boolean);
  const strArr = dartResult.split(/\d/).filter(Boolean);

  const temp: number[] = [];

  for (let i = 0; i < numArr.length; i += 1) {
    const flagArr = [...strArr[i]];
    let result = Number(numArr[i]);

    for (let j = 0; j < flagArr.length; j += 1) {
      const curFlag = flagArr[j];

      if (curFlag === 'D') {
        result **= 2;
      }

      if (curFlag === 'T') {
        result **= 3;
      }

      if (curFlag === '*') {
        result *= 2;

        if (i !== 0) {
          temp[i - 1] *= 2;
        }
      }

      if (curFlag === '#') {
        result = -result;
      }
    }

    temp.push(result);
  }

  return temp.reduce((acc, cur) => acc + cur, 0);
};
```

### 점수와 SDT, 옵션 나누기

입력은 문자열의 형태이다. 이 상태로 무언가를 하기에는 불편함이 많기 때문에 배열로 나눠주는것이 편하다. 원래의 접근 방식은 `String.split()` 메소드를 사용해 각 글자마다 나눠서 배열로 만들어 주었다. 하지만 이렇게 했을때 내가 간과한 것이 하나 있는데, 점수는 0점부터 10점까지 있다는 사실이다.

이것을 간과한 것이 나의 첫 풀이의 치명적인 오류였다. `'10'`을 `String.split()`을 이용해 배열로 바꾸면 `['1', '0']`이 된다. 나의 의도대로라면 `['10']`으로 나와야 하지만 안타깝게도 `String.split()`의 인자에 빈 문자열을 넣는다면 그렇게 작동하지 않는다.

> 여담으로 `String.split()`의 인자에 빈 문자열을 넣는 것보다는 `[...String]`과 같은 방식을 추천한다고 한다. 더 자세한 설명은 [stackoverflow](https://stackoverflow.com/questions/4547609/how-do-you-get-a-string-to-a-character-array-in-javascript/34717402#34717402)

내가 원하는대로 문자열을 나누기 위해서는 정규표현식을 사용하는 것이 가장 깔끔한 방법이라는 생각이 들었다. 하지만 난 정규표현식에 익숙치 않았고, 꽤 오랜 구글링과 선생님의 도움 끝이 다음과 같은 코드를 짤 수 있었다.

```typescript
const numArr = dartResult.split(/\D/).filter(Boolean);
const strArr = dartResult.split(/\d/).filter(Boolean);
```

정규표현식의 `\d`플래그와 `\D` 플래그를 사용해 숫자인 점수들의 배열과 숫자가 아닌 옵션과 SDT의 배열을 뽑아낼 수 있었다. `\d`플래그는 숫자를 뜻한다. 1부터 9까지를 뜻하며 `[1~9]`로도 표현할 수 있다. `\D` 플래그는 `\d` 플래그와 반대로 숫자가 아닌 것을 뜻한다. `[1~9]`로도 표현할 수 있다.

### 더 빠른 for문 사용하기
문자열을 저렇게 두 부분으로 나눈 후에는 그냥 문제에 나와있는대로 로직을 작성하면 된다. 하지만 여기서 `Array.map()` 혹은 `for...of` 문과 같은 좀 더 현대적인 문법보다는 전통적인 `for`문을 사용했다. 그 이유는 [다음](https://daesuni.github.io/Loop-performance/)에서의 속도 차이 때문이다.

원래 내가 읽은 포스트는 더 많은 상황에서의 벤치마크였는데, 평균적으로 가장 준수한 성능을 `for`문이 보여줬다. 효율성 검사에서 계속 통과 못하는 문제가 하나 있어서 더 신경을 썼다.

`for` 문을 사용해 하나의 점수와 옵션이 담긴 배열을 검사하며 하나의 빈 배열에 점수를 계산한 결과를 차례차레 넣은 후, 이것을 `Array.reduce()`로 모두 합하여 반환해줌으로써 해결했다.

## 배운점

정규표현식의 유용함을 배웠다. 문자열을 다룰 때 정말 압도적인 편리함을 제공한다고 생각한다. 배워두면 분명 매우 쓸모 있을 것이다.
